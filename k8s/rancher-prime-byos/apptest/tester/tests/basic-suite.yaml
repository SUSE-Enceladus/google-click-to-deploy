actions:

#<service>.<namespace>.<cluster>
- name: Try to connect to Rancher service to validate rancher service endpoint is up
  bashTest:
    script: |
      timeout 240 bash -c '
        until curl -L -k -H "Connection: close" "https://rancher.cattle-system.svc.cluster.local:443/"
          do sleep 2;
        done'
    expect:
      exitCode:
        equals: 0

# Un comment following to debug
#- name: Sleep for 120s
#  # allow for poking around in testing container
#  # remove before production
#  bashTest:
#    script: |
#          sleep 120
#    expect:
#      exitCode:
#        equals: 0

